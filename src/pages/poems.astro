---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import FormattedDate from '../components/FormattedDate.astro';
import PageTitle from '../components/PageTitle.astro';

const poems = await getCollection('poems');
poems.sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime());
---

<BaseLayout title="Poems">
	<style>
		.poem-list {
			list-style: none;
			padding: 0;
			margin: 0;
		}

		.poem-item {
			display: flex;
			justify-content: space-between;
			align-items: baseline;
			padding: var(--space-xs) 0;
			border-bottom: 1px solid var(--theme-border);
		}

		.poem-item:last-child {
			border-bottom: none;
		}

		.poem-item a {
			font-size: var(--step-0);
			font-weight: 600;
		}

		.poem-item a:hover {
			color: var(--theme-accent);
		}

		.poem-date {
			color: var(--theme-secondary);
			font-size: var(--step--2);
		}
	</style>
	<PageTitle title="Poems" />
	<ul class="poem-list">
		{poems.map((poem) => (
			<li class="poem-item">
				<a href={`/poems/${poem.id}`} class="title-link mono no-underline">{poem.data.title}</a>
				<time datetime={poem.data.pubDate.toISOString()} class="poem-date">
					<FormattedDate date={poem.data.pubDate} />
				</time>
			</li>
		))}
	</ul>
</BaseLayout> 